"use strict";(self.webpackChunkcvproject=self.webpackChunkcvproject||[]).push([[531],{531:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var l,s,r,i=a(5671),o=a(3144),n=a(7326),c=a(136),d=a(7277),p=a(2791),u=a(184),m=function(e){(0,c.Z)(a,e);var t=(0,d.Z)(a);function a(){var e;(0,i.Z)(this,a);for(var l=arguments.length,s=new Array(l),r=0;r<l;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={selectedPlace:0},e.updateSelectedPlace=function(t,a){"all-reviews"===t?e.setState({selectedPlace:a},e.toggleModal):"add-review"===t&&e.setState({selectedPlace:a},e.showAddReviewModal)},e.toggleModal=function(){document.querySelector("#all-reviews").classList.toggle("open")},e.showAddReviewModal=function(){document.querySelector("#add-review").classList.add("open")},e.hideAddReviewModal=function(){document.querySelector("#add-review").classList.remove("open")},e.addReview=function(){var t=document.querySelector("#review-user"),a=document.querySelector("#review-text"),l=document.querySelector("#review-rate"),s=Math.floor(Date.now()/1e3),r={author_name:t.value,author_url:"",profile_photo_url:"https://via.placeholder.com/50",rating:l.value,text:a.value,time:s};e.props.placesDetails[e.state.selectedPlace].reviews.push(r),e.props.placesDetails[e.state.selectedPlace].user_ratings_total+=1,e.hideAddReviewModal(),e.resetInputFields([t,a,l])},e.showAddPlaceModal=function(){document.querySelector("#add-place").classList.add("open")},e.hideAddPlaceModal=function(){document.querySelector("#add-place").classList.remove("open")},e.addPlace=function(){var t=document.querySelector("#place-name"),a=document.querySelector("#place-address"),l=document.querySelector("#place-phone"),s=document.querySelector("#place-latitude"),r=document.querySelector("#place-longitude"),i=document.querySelector("#place-rate");console.log("Place Lat: ",s.value),console.log("Place Lng: ",r.value);var o={name:t.value,formatted_address:a.value,formatted_phone_number:l.value,rating:i.value,user_ratings_total:0,reviews:[],lat:Number(s.value),lng:Number(r.value)};e.props.addPlace(o),e.hideAddPlaceModal(),e.resetInputFields([t,a,l,i,s,r])},e.resetInputFields=function(e){e.map((function(e){e.value=""}))},e.convertTime=function(e){return new Date(1e3*e).toISOString().slice(0,19).replace("T"," ")},e}return(0,o.Z)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.placesDetails,l=t.handleSort;return(0,u.jsxs)("div",{className:"sidebar",children:[(0,u.jsxs)("div",{className:"options",children:[(0,u.jsxs)("div",{className:"sort",children:["Sort by:"," ",(0,u.jsxs)("select",{id:"sortby",onChange:l,children:[(0,u.jsx)("option",{value:"0",children:"Any Rating"}),(0,u.jsx)("option",{value:"1",children:"+1 \u2b50\u2730\u2730\u2730\u2730"}),(0,u.jsx)("option",{value:"2",children:"+2 \u2b50\u2b50\u2730\u2730\u2730"}),(0,u.jsx)("option",{value:"3",children:"+3 \u2b50\u2b50\u2b50\u2730\u2730"}),(0,u.jsx)("option",{value:"4",children:"+4 \u2b50\u2b50\u2b50\u2b50\u2730"})]})]}),(0,u.jsx)("button",{className:"cta",onClick:this.showAddPlaceModal,children:"Add New Place"})]}),(0,u.jsx)("div",{className:"places",children:a.map((function(t,a){return(0,u.jsxs)("div",{className:"place",children:[(0,u.jsx)("img",{src:t.photos?t.photos[0].getUrl({maxWidth:300,maxHeight:300}):"https://via.placeholder.com/300",alt:t.name}),(0,u.jsxs)("div",{className:"details",children:[(0,u.jsx)("h2",{className:"name",children:t.name}),(0,u.jsxs)("div",{className:"review",children:[(0,u.jsxs)("ul",{className:"stars rate-"+Math.round(t.rating),children:[(0,u.jsx)("li",{children:(0,u.jsx)("i",{className:"fas fa-star"})}),(0,u.jsx)("li",{children:(0,u.jsx)("i",{className:"fas fa-star"})}),(0,u.jsx)("li",{children:(0,u.jsx)("i",{className:"fas fa-star"})}),(0,u.jsx)("li",{children:(0,u.jsx)("i",{className:"fas fa-star"})}),(0,u.jsx)("li",{children:(0,u.jsx)("i",{className:"fas fa-star"})})]}),(0,u.jsx)("strong",{children:Math.round(t.rating)}),(0,u.jsxs)("span",{className:"all-reviews",onClick:function(){return e.updateSelectedPlace("all-reviews",a)},children:["(",t.user_ratings_total,")"]}),(0,u.jsx)("span",{className:"add-review",onClick:function(){return e.updateSelectedPlace("add-review",a)},children:"Add Review"})]}),(0,u.jsxs)("ul",{className:"info",children:[(0,u.jsxs)("li",{children:[(0,u.jsx)("i",{className:"fas fa-phone-alt"}),(0,u.jsx)("a",{href:"tel:"+t.formatted_phone_number,children:t.formatted_phone_number})]}),(0,u.jsxs)("li",{children:[(0,u.jsx)("i",{className:"fas fa-map-marker-alt"})," ",t.formatted_address]})]})]})]},a)}))}),(0,u.jsx)("div",{className:"modal reviews",id:"all-reviews",children:(0,u.jsxs)("div",{className:"inner",children:[(0,u.jsx)("div",{className:"close",onClick:this.toggleModal,children:"X"}),(0,u.jsx)("div",{className:"review-list",children:a[0]?a[this.state.selectedPlace].reviews.map((function(t){return(0,u.jsxs)("div",{className:"review",children:[(0,u.jsxs)("div",{className:"author",children:[(0,u.jsx)("img",{src:t.profile_photo_url,alt:t.author_name,title:t.author_name,className:"author-thumbnail"}),(0,u.jsxs)("ul",{className:"author-info",children:[(0,u.jsx)("li",{children:t.author_url?(0,u.jsx)("a",{href:t.author_url,target:"_blank",children:t.author_name}):(0,u.jsx)("span",{children:t.author_name})}),(0,u.jsxs)("li",{children:[(0,u.jsxs)("ul",{className:"stars rate-"+Math.round(t.rating),children:[(0,u.jsx)("li",{children:(0,u.jsx)("i",{className:"fas fa-star"})}),(0,u.jsx)("li",{children:(0,u.jsx)("i",{className:"fas fa-star"})}),(0,u.jsx)("li",{children:(0,u.jsx)("i",{className:"fas fa-star"})}),(0,u.jsx)("li",{children:(0,u.jsx)("i",{className:"fas fa-star"})}),(0,u.jsx)("li",{children:(0,u.jsx)("i",{className:"fas fa-star"})})]}),(0,u.jsx)("time",{children:e.convertTime(t.time)})]})]})]}),(0,u.jsx)("p",{class:"text",children:t.text})]})})):(0,u.jsx)("div",{children:"Nothing!"})})]})}),(0,u.jsx)("div",{className:"modal add-review",id:"add-review",children:(0,u.jsxs)("div",{className:"inner",children:[(0,u.jsx)("div",{className:"close",onClick:this.hideAddReviewModal,children:"X"}),(0,u.jsxs)("form",{action:"",onSubmit:function(e){return e.preventDefault()},children:[(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"review-user",children:"Full Name"}),(0,u.jsx)("input",{type:"text",id:"review-user",placeholder:"Ex. John Doe",required:!0})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"review-rate",children:"Rating"}),(0,u.jsxs)("select",{id:"review-rate",required:!0,children:[(0,u.jsx)("option",{value:"1",children:"1"}),(0,u.jsx)("option",{value:"2",children:"2"}),(0,u.jsx)("option",{value:"3",children:"3"}),(0,u.jsx)("option",{value:"4",children:"4"}),(0,u.jsx)("option",{value:"5",children:"5"})]})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"review-text",children:"Review"}),(0,u.jsx)("textarea",{id:"review-text",cols:"30",rows:"10",placeholder:"Write your review...",required:!0})]}),(0,u.jsx)("button",{onClick:this.addReview,children:"Add Review"})]})]})}),(0,u.jsx)("div",{className:"modal add-place",id:"add-place",children:(0,u.jsxs)("div",{className:"inner",children:[(0,u.jsx)("div",{className:"close",onClick:this.hideAddPlaceModal,children:"X"}),(0,u.jsxs)("form",{action:"",onSubmit:function(e){return e.preventDefault()},children:[(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"place-name",children:"Place Name"}),(0,u.jsx)("input",{type:"text",id:"place-name",placeholder:"Ex. The Osmanly Restaurant",required:!0})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"place-address",children:"Address"}),(0,u.jsx)("input",{type:"text",id:"place-address",placeholder:"Ex. Kempinski Nile Hotel, Corniche El Nil, 12 Ahmed Raghab Street",required:!0})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"place-latitude",children:"Latitude"}),(0,u.jsx)("input",{type:"text",id:"place-latitude",placeholder:"Ex. 48.850073",required:!0})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"place-longitude",children:"Longitude"}),(0,u.jsx)("input",{type:"text",id:"place-longitude",placeholder:"Ex. 2.299631",required:!0})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"place-phone",children:"Phone"}),(0,u.jsx)("input",{type:"text",id:"place-phone",placeholder:"Ex. 02 27980000",required:!0})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{htmlFor:"place-rate",children:"Rating"}),(0,u.jsxs)("select",{id:"place-rate",required:!0,children:[(0,u.jsx)("option",{value:"1",children:"1"}),(0,u.jsx)("option",{value:"2",children:"2"}),(0,u.jsx)("option",{value:"3",children:"3"}),(0,u.jsx)("option",{value:"4",children:"4"}),(0,u.jsx)("option",{value:"5",children:"5"})]})]}),(0,u.jsx)("button",{onClick:this.addPlace,children:"Add Place"})]})]})})]})}}]),a}(p.Component),h=m,f=function(e){(0,c.Z)(a,e);var t=(0,d.Z)(a);function a(){return(0,i.Z)(this,a),t.apply(this,arguments)}return(0,o.Z)(a,[{key:"render",value:function(){return(0,u.jsx)("div",{id:"map"})}}]),a}(p.Component),v=f,y=a(3360),x=a(1087),g=[{elementType:"geometry",stylers:[{color:"#ebe3cd"}]},{elementType:"labels.text.fill",stylers:[{color:"#523735"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f1e6"}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#c9b2a6"}]},{featureType:"administrative.land_parcel",elementType:"geometry.stroke",stylers:[{color:"#dcd2be"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#ae9e90"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#93817c"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#a5b076"}]},{featureType:"poi.park",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#447530"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#f5f1e6"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#fdfcf8"}]},{featureType:"road.arterial",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#f8c967"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#e9bc62"}]},{featureType:"road.highway",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#e98d58"}]},{featureType:"road.highway.controlled_access",elementType:"geometry.stroke",stylers:[{color:"#db8555"}]},{featureType:"road.local",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#806b63"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"transit.line",elementType:"labels.text.fill",stylers:[{color:"#8f7d77"}]},{featureType:"transit.line",elementType:"labels.text.stroke",stylers:[{color:"#ebe3cd"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#b9d3c2"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#92998d"}]}],j=function(e){(0,c.Z)(a,e);var t=(0,d.Z)(a);function a(){var e;(0,i.Z)(this,a);for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];return(e=t.call.apply(t,[this].concat(c))).state={placesDetails:[],sortedPlacesDetails:[],lat:48.859514,lng:2.299105,zoom:17},e.renderMap=function(){!function(e){var t=window.document.getElementsByTagName("script")[0],a=window.document.createElement("script");a.src=e,a.async=!0,a.defer=!0,t.parentNode.insertBefore(a,t)}("https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyBLJywnQWvwWKzi77qj2KlKtKfPEkh1YI4","&libraries=places&callback=initMap")),window.initMap=e.initMap},e.initMap=function(){var t={lat:e.state.lat,lng:e.state.lng};l=new window.google.maps.Map(document.getElementById("map"),{center:t,zoom:15,styles:g});new window.google.maps.Marker({position:t,map:l,title:"You're Here!"});e.getCurrentLocation();var a={location:t,radius:500,type:["restaurant"]};s=new window.google.maps.InfoWindow,(r=new window.google.maps.places.PlacesService(l)).nearbySearch(a,e.callback)},e.callback=function(t,a){var l=(0,n.Z)(e);if(a===window.google.maps.places.PlacesServiceStatus.OK){var s=[],i=["name","formatted_address","formatted_phone_number","rating","user_ratings_total","reviews","photo","place_id","geometry"];t.map((function(e){r.getDetails({placeId:e.place_id,fields:i},(function(e,t){t===window.google.maps.places.PlacesServiceStatus.OK&&(s.push(e),l.setState({placesDetails:s,sortedPlacesDetails:s},l.addMarkers(s)))}))}))}},e.addMarkers=function(t){t.forEach(e.createMarker)},e.createMarker=function(e){var t=new window.google.maps.Marker({map:l,title:e.name,icon:{url:"https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png",anchor:new window.google.maps.Point(10,10),scaledSize:new window.google.maps.Size(20,20)},position:e.geometry.location});t.addListener("click",(function(){e.reference;console.log(t);var a=e.photos?e.photos[0].getUrl({maxWidth:300,maxHeight:300}):"https://via.placeholder.com/300",r="\n        <h2>".concat(e.name,"</h2>\n        <img src=").concat(a,">\n        <ul>\n          <li>").concat(e.formatted_address,"</li>\n          <li>").concat(e.formatted_phone_number,"</li>\n        </ul>\n      ");s.setContent(r),s.open(l,t)}))},e.getCurrentLocation=function(){var t=(0,n.Z)(e),a=new window.google.maps.InfoWindow,s=function(e,t,a){t.setPosition(a),t.setContent(e?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation."),t.open(l)};navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){var s={lat:e.coords.latitude,lng:e.coords.longitude};a.setPosition(s),a.setContent("You're here!"),a.open(l),l.setCenter(s),t.setState({lat:e.coords.latitude,lng:e.coords.longitude}),t.initMap()}),(function(){s(!0,a,l.getCenter())})):s(!1,a,l.getCenter())},e.handleSort=function(t){var a=e.state.placesDetails,l=[],s=t.target.value;a&&a.length>0&&a.map((function(e){console.log(e.rating),e.rating>=s&&l.push(e)})),e.setState({sortedPlacesDetails:l}),l=[]},e.addPlace=function(t){var a=e.state.placesDetails;a.push(t);e.setState({placesDetails:a},function(){var e={lat:t.lat,lng:t.lng},a=new window.google.maps.Marker({position:e,map:l,title:t.name,icon:{url:"https://maps.gstatic.com/mapfiles/place_api/icons/restaurant-71.png",anchor:new window.google.maps.Point(10,10),scaledSize:new window.google.maps.Size(20,20)}});a.setMap(l),l.setCenter(e),a.addListener("click",(function(){var e=t.photos?t.photos[0].getUrl({maxWidth:300,maxHeight:300}):"https://via.placeholder.com/300",r="\n          <h2>".concat(t.name,"</h2>\n          <img src=").concat(e,">\n          <ul>\n            <li>").concat(t.formatted_address,"</li>\n            <li>").concat(t.formatted_phone_number,"</li>\n          </ul>\n        ");s.setContent(r),s.open(l,a)}))}())},e}return(0,o.Z)(a,[{key:"componentDidMount",value:function(){this.renderMap()}},{key:"render",value:function(){return this.props.handleShops(this.state),(0,u.jsxs)("div",{className:"App",children:[(0,u.jsx)(x.rU,{to:"/nearby/shops",children:(0,u.jsx)(y.Z,{children:"Nearby Shops"})}),(0,u.jsx)(h,{placesDetails:this.state.sortedPlacesDetails,handleSort:this.handleSort,addPlace:this.addPlace}),(0,u.jsx)(v,{})]})}}]),a}(p.Component);var w=j}}]);
//# sourceMappingURL=531.389a7aa8.chunk.js.map